const tf = require("@tensorflow/tfjs-node");

let model;
tf.loadLayersModel("file://path/to/your/model.json").then((loadedModel) => {
  model = loadedModel;
});

exports.process = ( (req, res) => {
  const { text } = req.body;
  if (!text) {
    return res
      .status(400)
      .json({ error: 'Missing "text" property in request body' });
  }

  const inputTensor = tf.tensor([text]);
  const result = model.predict(inputTensor);

  res.json({ result: result.dataSync() });
});
